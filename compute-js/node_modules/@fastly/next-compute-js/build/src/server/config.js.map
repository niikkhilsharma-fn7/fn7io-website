{"version":3,"file":"config.js","sourceRoot":"","sources":["../../../src/server/config.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright Fastly, Inc.\n * Licensed under the MIT license. See LICENSE file for details.\n *\n * Portions of this file Copyright Vercel, Inc., licensed under the MIT license. See LICENSE file for details.\n */\n\nimport { basename, extname, isAbsolute, relative, resolve } from 'path';\n\nimport chalk from 'chalk';\nimport { CONFIG_FILES } from 'next/constants';\nimport * as Log from 'next/dist/build/output/log';\nimport {\n  defaultConfig,\n  ExperimentalConfig,\n  NextConfigComplete,\n  normalizeConfig,\n  validateConfig\n} from 'next/dist/server/config-shared';\nimport { execOnce } from 'next/dist/shared/lib/utils';\nimport { ImageConfig, imageConfigDefault, VALID_LOADERS } from 'next/dist/shared/lib/image-config';\n\nimport { Assets } from './common';\n\nconst targets = [ 'server' /*, 'serverless', 'experimental-serverless-trace'*/];\n\n/* ------ */\n/* These functions copied from Next.js: next/server/config.ts, because they are not exported from that file. */\n\nconst experimentalWarning = execOnce(\n  (configFileName: string, features: string[]) => {\n    const s = features.length > 1 ? 's' : ''\n    Log.warn(\n      chalk.bold(\n        `You have enabled experimental feature${s} (${features.join(\n          ', '\n        )}) in ${configFileName}.`\n      )\n    )\n    Log.warn(\n      `Experimental features are not covered by semver, and may cause unexpected or broken application behavior. ` +\n        `Use at your own risk.`\n    )\n    console.warn()\n  }\n)\n\nfunction assignDefaults(userConfig: { [key: string]: any }) {\n  const configFileName = userConfig.configFileName\n  if (typeof userConfig.exportTrailingSlash !== 'undefined') {\n    console.warn(\n      chalk.yellow.bold('Warning: ') +\n        `The \"exportTrailingSlash\" option has been renamed to \"trailingSlash\". Please update your ${configFileName}.`\n    )\n    if (typeof userConfig.trailingSlash === 'undefined') {\n      userConfig.trailingSlash = userConfig.exportTrailingSlash\n    }\n    delete userConfig.exportTrailingSlash\n  }\n\n  const config = Object.keys(userConfig).reduce<{ [key: string]: any }>(\n    (currentConfig, key) => {\n      const value = userConfig[key]\n\n      if (value === undefined || value === null) {\n        return currentConfig\n      }\n\n      if (key === 'experimental' && typeof value === 'object') {\n        const enabledExperiments: (keyof ExperimentalConfig)[] = []\n\n        // defaultConfig.experimental is predefined and will never be undefined\n        // This is only a type guard for the typescript\n        if (defaultConfig.experimental) {\n          for (const featureName of Object.keys(\n            value\n          ) as (keyof ExperimentalConfig)[]) {\n            if (\n              value[featureName] !== defaultConfig.experimental[featureName]\n            ) {\n              enabledExperiments.push(featureName)\n            }\n          }\n        }\n\n        if (enabledExperiments.length > 0) {\n          experimentalWarning(configFileName, enabledExperiments)\n        }\n      }\n\n      if (key === 'distDir') {\n        if (typeof value !== 'string') {\n          throw new Error(\n            `Specified distDir is not a string, found type \"${typeof value}\"`\n          )\n        }\n        const userDistDir = value.trim()\n\n        // don't allow public as the distDir as this is a reserved folder for\n        // public files\n        if (userDistDir === 'public') {\n          throw new Error(\n            `The 'public' directory is reserved in Next.js and can not be set as the 'distDir'. https://nextjs.org/docs/messages/can-not-output-to-public`\n          )\n        }\n        // make sure distDir isn't an empty string as it can result in the provided\n        // directory being deleted in development mode\n        if (userDistDir.length === 0) {\n          throw new Error(\n            `Invalid distDir provided, distDir can not be an empty string. Please remove this config or set it to undefined`\n          )\n        }\n      }\n\n      if (key === 'pageExtensions') {\n        if (!Array.isArray(value)) {\n          throw new Error(\n            `Specified pageExtensions is not an array of strings, found \"${value}\". Please update this config or remove it.`\n          )\n        }\n\n        if (!value.length) {\n          throw new Error(\n            `Specified pageExtensions is an empty array. Please update it with the relevant extensions or remove it.`\n          )\n        }\n\n        value.forEach((ext) => {\n          if (typeof ext !== 'string') {\n            throw new Error(\n              `Specified pageExtensions is not an array of strings, found \"${ext}\" of type \"${typeof ext}\". Please update this config or remove it.`\n            )\n          }\n        })\n      }\n\n      if (!!value && value.constructor === Object) {\n        currentConfig[key] = {\n          ...defaultConfig[key],\n          ...Object.keys(value).reduce<any>((c, k) => {\n            const v = value[k]\n            if (v !== undefined && v !== null) {\n              c[k] = v\n            }\n            return c\n          }, {}),\n        }\n      } else {\n        currentConfig[key] = value\n      }\n\n      return currentConfig\n    },\n    {}\n  )\n\n  const result = { ...defaultConfig, ...config }\n\n  if (typeof result.assetPrefix !== 'string') {\n    throw new Error(\n      `Specified assetPrefix is not a string, found type \"${typeof result.assetPrefix}\" https://nextjs.org/docs/messages/invalid-assetprefix`\n    )\n  }\n\n  if (typeof result.basePath !== 'string') {\n    throw new Error(\n      `Specified basePath is not a string, found type \"${typeof result.basePath}\"`\n    )\n  }\n\n  if (result.basePath !== '') {\n    if (result.basePath === '/') {\n      throw new Error(\n        `Specified basePath /. basePath has to be either an empty string or a path prefix\"`\n      )\n    }\n\n    if (!result.basePath.startsWith('/')) {\n      throw new Error(\n        `Specified basePath has to start with a /, found \"${result.basePath}\"`\n      )\n    }\n\n    if (result.basePath !== '/') {\n      if (result.basePath.endsWith('/')) {\n        throw new Error(\n          `Specified basePath should not end with /, found \"${result.basePath}\"`\n        )\n      }\n\n      if (result.assetPrefix === '') {\n        result.assetPrefix = result.basePath\n      }\n\n      if (result.amp?.canonicalBase === '') {\n        result.amp.canonicalBase = result.basePath\n      }\n    }\n  }\n\n  if (result?.images) {\n    const images: ImageConfig = result.images\n\n    if (typeof images !== 'object') {\n      throw new Error(\n        `Specified images should be an object received ${typeof images}.\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n      )\n    }\n\n    if (images.domains) {\n      if (!Array.isArray(images.domains)) {\n        throw new Error(\n          `Specified images.domains should be an Array received ${typeof images.domains}.\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n\n      // static images are automatically prefixed with assetPrefix\n      // so we need to ensure _next/image allows downloading from\n      // this resource\n      if (config.assetPrefix?.startsWith('http')) {\n        images.domains.push(new URL(config.assetPrefix).hostname)\n      }\n\n      if (images.domains.length > 50) {\n        throw new Error(\n          `Specified images.domains exceeds length of 50, received length (${images.domains.length}), please reduce the length of the array to continue.\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n\n      const invalid = images.domains.filter(\n        (d: unknown) => typeof d !== 'string'\n      )\n      if (invalid.length > 0) {\n        throw new Error(\n          `Specified images.domains should be an Array of strings received invalid values (${invalid.join(\n            ', '\n          )}).\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n    }\n\n    const remotePatterns = result?.images?.remotePatterns\n    if (remotePatterns) {\n      if (!Array.isArray(remotePatterns)) {\n        throw new Error(\n          `Specified images.remotePatterns should be an Array received ${typeof remotePatterns}.\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n\n      if (remotePatterns.length > 50) {\n        throw new Error(\n          `Specified images.remotePatterns exceeds length of 50, received length (${remotePatterns.length}), please reduce the length of the array to continue.\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n\n      const validProps = new Set(['protocol', 'hostname', 'pathname', 'port'])\n      const requiredProps = ['hostname']\n      const invalidPatterns = remotePatterns.filter(\n        (d: unknown) =>\n          !d ||\n          typeof d !== 'object' ||\n          Object.entries(d).some(\n            ([k, v]) => !validProps.has(k) || typeof v !== 'string'\n          ) ||\n          requiredProps.some((k) => !(k in d))\n      )\n      if (invalidPatterns.length > 0) {\n        throw new Error(\n          `Invalid images.remotePatterns values:\\n${invalidPatterns\n            .map((item) => JSON.stringify(item))\n            .join(\n              '\\n'\n            )}\\n\\nremotePatterns value must follow format { protocol: 'https', hostname: 'example.com', port: '', pathname: '/imgs/**' }.\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n    }\n\n    if (images.deviceSizes) {\n      const { deviceSizes } = images\n      if (!Array.isArray(deviceSizes)) {\n        throw new Error(\n          `Specified images.deviceSizes should be an Array received ${typeof deviceSizes}.\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n\n      if (deviceSizes.length > 25) {\n        throw new Error(\n          `Specified images.deviceSizes exceeds length of 25, received length (${deviceSizes.length}), please reduce the length of the array to continue.\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n\n      const invalid = deviceSizes.filter((d: unknown) => {\n        return typeof d !== 'number' || d < 1 || d > 10000\n      })\n\n      if (invalid.length > 0) {\n        throw new Error(\n          `Specified images.deviceSizes should be an Array of numbers that are between 1 and 10000, received invalid values (${invalid.join(\n            ', '\n          )}).\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n    }\n    if (images.imageSizes) {\n      const { imageSizes } = images\n      if (!Array.isArray(imageSizes)) {\n        throw new Error(\n          `Specified images.imageSizes should be an Array received ${typeof imageSizes}.\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n\n      if (imageSizes.length > 25) {\n        throw new Error(\n          `Specified images.imageSizes exceeds length of 25, received length (${imageSizes.length}), please reduce the length of the array to continue.\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n\n      const invalid = imageSizes.filter((d: unknown) => {\n        return typeof d !== 'number' || d < 1 || d > 10000\n      })\n\n      if (invalid.length > 0) {\n        throw new Error(\n          `Specified images.imageSizes should be an Array of numbers that are between 1 and 10000, received invalid values (${invalid.join(\n            ', '\n          )}).\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n    }\n\n    if (!images.loader) {\n      images.loader = 'default'\n    }\n\n    if (!VALID_LOADERS.includes(images.loader)) {\n      throw new Error(\n        `Specified images.loader should be one of (${VALID_LOADERS.join(\n          ', '\n        )}), received invalid value (${\n          images.loader\n        }).\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n      )\n    }\n\n    if (\n      images.loader !== 'default' &&\n      images.loader !== 'custom' &&\n      images.path === imageConfigDefault.path\n    ) {\n      throw new Error(\n        `Specified images.loader property (${images.loader}) also requires images.path property to be assigned to a URL prefix.\\nSee more info here: https://nextjs.org/docs/api-reference/next/image#loader-configuration`\n      )\n    }\n\n    // Append trailing slash for non-default loaders and when trailingSlash is set\n    if (images.path) {\n      if (\n        (images.loader !== 'default' &&\n          images.path[images.path.length - 1] !== '/') ||\n        result.trailingSlash\n      ) {\n        images.path += '/'\n      }\n    }\n\n    if (images.path === imageConfigDefault.path && result.basePath) {\n      images.path = `${result.basePath}${images.path}`\n    }\n\n    if (\n      images.minimumCacheTTL &&\n      (!Number.isInteger(images.minimumCacheTTL) || images.minimumCacheTTL < 0)\n    ) {\n      throw new Error(\n        `Specified images.minimumCacheTTL should be an integer 0 or more received (${images.minimumCacheTTL}).\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n      )\n    }\n\n    if (images.formats) {\n      const { formats } = images\n      if (!Array.isArray(formats)) {\n        throw new Error(\n          `Specified images.formats should be an Array received ${typeof formats}.\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n      if (formats.length < 1 || formats.length > 2) {\n        throw new Error(\n          `Specified images.formats must be length 1 or 2, received length (${formats.length}), please reduce the length of the array to continue.\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n\n      const invalid = formats.filter((f) => {\n        return f !== 'image/avif' && f !== 'image/webp'\n      })\n\n      if (invalid.length > 0) {\n        throw new Error(\n          `Specified images.formats should be an Array of mime type strings, received invalid values (${invalid.join(\n            ', '\n          )}).\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n        )\n      }\n    }\n\n    if (\n      typeof images.dangerouslyAllowSVG !== 'undefined' &&\n      typeof images.dangerouslyAllowSVG !== 'boolean'\n    ) {\n      throw new Error(\n        `Specified images.dangerouslyAllowSVG should be a boolean received (${images.dangerouslyAllowSVG}).\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n      )\n    }\n\n    if (\n      typeof images.contentSecurityPolicy !== 'undefined' &&\n      typeof images.contentSecurityPolicy !== 'string'\n    ) {\n      throw new Error(\n        `Specified images.contentSecurityPolicy should be a string received (${images.contentSecurityPolicy}).\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n      )\n    }\n\n    const unoptimized = result?.images?.unoptimized\n    if (\n      typeof unoptimized !== 'undefined' &&\n      typeof unoptimized !== 'boolean'\n    ) {\n      throw new Error(\n        `Specified images.unoptimized should be a boolean, received (${unoptimized}).\\nSee more info here: https://nextjs.org/docs/messages/invalid-images-config`\n      )\n    }\n  }\n\n  if (result.webpack5 === false) {\n    throw new Error(\n      `Webpack 4 is no longer supported in Next.js. Please upgrade to webpack 5 by removing \"webpack5: false\" from ${configFileName}. https://nextjs.org/docs/messages/webpack5`\n    )\n  }\n\n  if (result.experimental && 'swcMinify' in (result.experimental as any)) {\n    Log.warn(\n      `\\`swcMinify\\` has been moved out of \\`experimental\\`. Please update your ${configFileName} file accordingly.`\n    )\n    result.swcMinify = (result.experimental as any).swcMinify\n  }\n\n  if (result.experimental && 'relay' in (result.experimental as any)) {\n    Log.warn(\n      `\\`relay\\` has been moved out of \\`experimental\\` and into \\`compiler\\`. Please update your ${configFileName} file accordingly.`\n    )\n    result.compiler = result.compiler || {}\n    result.compiler.relay = (result.experimental as any).relay\n  }\n\n  if (\n    result.experimental &&\n    'styledComponents' in (result.experimental as any)\n  ) {\n    Log.warn(\n      `\\`styledComponents\\` has been moved out of \\`experimental\\` and into \\`compiler\\`. Please update your ${configFileName} file accordingly.`\n    )\n    result.compiler = result.compiler || {}\n    result.compiler.styledComponents = (\n      result.experimental as any\n    ).styledComponents\n  }\n\n  if (result.experimental && 'emotion' in (result.experimental as any)) {\n    Log.warn(\n      `\\`emotion\\` has been moved out of \\`experimental\\` and into \\`compiler\\`. Please update your ${configFileName} file accordingly.`\n    )\n    result.compiler = result.compiler || {}\n    result.compiler.emotion = (result.experimental as any).emotion\n  }\n\n  if (\n    result.experimental &&\n    'reactRemoveProperties' in (result.experimental as any)\n  ) {\n    Log.warn(\n      `\\`reactRemoveProperties\\` has been moved out of \\`experimental\\` and into \\`compiler\\`. Please update your ${configFileName} file accordingly.`\n    )\n    result.compiler = result.compiler || {}\n    result.compiler.reactRemoveProperties = (\n      result.experimental as any\n    ).reactRemoveProperties\n  }\n\n  if (result.experimental && 'removeConsole' in (result.experimental as any)) {\n    Log.warn(\n      `\\`removeConsole\\` has been moved out of \\`experimental\\` and into \\`compiler\\`. Please update your ${configFileName} file accordingly.`\n    )\n    result.compiler = result.compiler || {}\n    result.compiler.removeConsole = (result.experimental as any).removeConsole\n  }\n\n  if (result.experimental?.swcMinifyDebugOptions) {\n    Log.warn(\n      'SWC minify debug option specified. This option is for debugging minifier issues and will be removed once SWC minifier is stable.'\n    )\n  }\n\n  if ((result.experimental as any).outputStandalone) {\n    Log.warn(\n      `experimental.outputStandalone has been renamed to \"output: 'standalone'\", please move the config.`\n    )\n    result.output = 'standalone'\n  }\n\n  if (\n    result.experimental?.outputFileTracingRoot &&\n    !isAbsolute(result.experimental.outputFileTracingRoot)\n  ) {\n    result.experimental.outputFileTracingRoot = resolve(\n      result.experimental.outputFileTracingRoot\n    )\n    Log.warn(\n      `experimental.outputFileTracingRoot should be absolute, using: ${result.experimental.outputFileTracingRoot}`\n    )\n  }\n\n  if (result.output === 'standalone' && !result.outputFileTracing) {\n    Log.warn(\n      `\"output: 'standalone'\" requires outputFileTracing not be disabled please enable it to leverage the standalone build`\n    )\n    result.output = undefined\n  }\n\n  if (result.i18n) {\n    const { i18n } = result\n    const i18nType = typeof i18n\n\n    if (i18nType !== 'object') {\n      throw new Error(\n        `Specified i18n should be an object received ${i18nType}.\\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`\n      )\n    }\n\n    if (!Array.isArray(i18n.locales)) {\n      throw new Error(\n        `Specified i18n.locales should be an Array received ${typeof i18n.locales}.\\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`\n      )\n    }\n\n    if (i18n.locales.length > 100) {\n      Log.warn(\n        `Received ${i18n.locales.length} i18n.locales items which exceeds the recommended max of 100.\\nSee more info here: https://nextjs.org/docs/advanced-features/i18n-routing#how-does-this-work-with-static-generation`\n      )\n    }\n\n    const defaultLocaleType = typeof i18n.defaultLocale\n\n    if (!i18n.defaultLocale || defaultLocaleType !== 'string') {\n      throw new Error(\n        `Specified i18n.defaultLocale should be a string.\\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`\n      )\n    }\n\n    if (typeof i18n.domains !== 'undefined' && !Array.isArray(i18n.domains)) {\n      throw new Error(\n        `Specified i18n.domains must be an array of domain objects e.g. [ { domain: 'example.fr', defaultLocale: 'fr', locales: ['fr'] } ] received ${typeof i18n.domains}.\\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`\n      )\n    }\n\n    if (i18n.domains) {\n      const invalidDomainItems = i18n.domains.filter((item) => {\n        if (!item || typeof item !== 'object') return true\n        if (!item.defaultLocale) return true\n        if (!item.domain || typeof item.domain !== 'string') return true\n\n        const defaultLocaleDuplicate = i18n.domains?.find(\n          (altItem) =>\n            altItem.defaultLocale === item.defaultLocale &&\n            altItem.domain !== item.domain\n        )\n\n        if (defaultLocaleDuplicate) {\n          console.warn(\n            `Both ${item.domain} and ${defaultLocaleDuplicate.domain} configured the defaultLocale ${item.defaultLocale} but only one can. Change one item's default locale to continue`\n          )\n          return true\n        }\n\n        let hasInvalidLocale = false\n\n        if (Array.isArray(item.locales)) {\n          for (const locale of item.locales) {\n            if (typeof locale !== 'string') hasInvalidLocale = true\n\n            for (const domainItem of i18n.domains || []) {\n              if (domainItem === item) continue\n              if (domainItem.locales && domainItem.locales.includes(locale)) {\n                console.warn(\n                  `Both ${item.domain} and ${domainItem.domain} configured the locale (${locale}) but only one can. Remove it from one i18n.domains config to continue`\n                )\n                hasInvalidLocale = true\n                break\n              }\n            }\n          }\n        }\n\n        return hasInvalidLocale\n      })\n\n      if (invalidDomainItems.length > 0) {\n        throw new Error(\n          `Invalid i18n.domains values:\\n${invalidDomainItems\n            .map((item: any) => JSON.stringify(item))\n            .join(\n              '\\n'\n            )}\\n\\ndomains value must follow format { domain: 'example.fr', defaultLocale: 'fr', locales: ['fr'] }.\\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`\n        )\n      }\n    }\n\n    if (!Array.isArray(i18n.locales)) {\n      throw new Error(\n        `Specified i18n.locales must be an array of locale strings e.g. [\"en-US\", \"nl-NL\"] received ${typeof i18n.locales}.\\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`\n      )\n    }\n\n    const invalidLocales = i18n.locales.filter(\n      (locale: any) => typeof locale !== 'string'\n    )\n\n    if (invalidLocales.length > 0) {\n      throw new Error(\n        `Specified i18n.locales contains invalid values (${invalidLocales\n          .map(String)\n          .join(\n            ', '\n          )}), locales must be valid locale tags provided as strings e.g. \"en-US\".\\n` +\n          `See here for list of valid language sub-tags: http://www.iana.org/assignments/language-subtag-registry/language-subtag-registry`\n      )\n    }\n\n    if (!i18n.locales.includes(i18n.defaultLocale)) {\n      throw new Error(\n        `Specified i18n.defaultLocale should be included in i18n.locales.\\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`\n      )\n    }\n\n    const normalizedLocales = new Set()\n    const duplicateLocales = new Set()\n\n    i18n.locales.forEach((locale) => {\n      const localeLower = locale.toLowerCase()\n      if (normalizedLocales.has(localeLower)) {\n        duplicateLocales.add(locale)\n      }\n      normalizedLocales.add(localeLower)\n    })\n\n    if (duplicateLocales.size > 0) {\n      throw new Error(\n        `Specified i18n.locales contains the following duplicate locales:\\n` +\n          `${[...duplicateLocales].join(', ')}\\n` +\n          `Each locale should be listed only once.\\n` +\n          `See more info here: https://nextjs.org/docs/messages/invalid-i18n-config`\n      )\n    }\n\n    // make sure default Locale is at the front\n    i18n.locales = [\n      i18n.defaultLocale,\n      ...i18n.locales.filter((locale) => locale !== i18n.defaultLocale),\n    ]\n\n    const localeDetectionType = typeof i18n.localeDetection\n\n    if (\n      localeDetectionType !== 'boolean' &&\n      localeDetectionType !== 'undefined'\n    ) {\n      throw new Error(\n        `Specified i18n.localeDetection should be undefined or a boolean received ${localeDetectionType}.\\nSee more info here: https://nextjs.org/docs/messages/invalid-i18n-config`\n      )\n    }\n  }\n\n  if (result.experimental?.serverComponents) {\n    const pageExtensions: string[] = []\n    ;(result.pageExtensions || []).forEach((ext) => {\n      pageExtensions.push(ext)\n      pageExtensions.push(`server.${ext}`)\n      pageExtensions.push(`client.${ext}`)\n    })\n    result.pageExtensions = pageExtensions\n  }\n\n  if (result.devIndicators?.buildActivityPosition) {\n    const { buildActivityPosition } = result.devIndicators\n    const allowedValues = [\n      'top-left',\n      'top-right',\n      'bottom-left',\n      'bottom-right',\n    ]\n\n    if (!allowedValues.includes(buildActivityPosition)) {\n      throw new Error(\n        `Invalid \"devIndicator.buildActivityPosition\" provided, expected one of ${allowedValues.join(\n          ', '\n        )}, received ${buildActivityPosition}`\n      )\n    }\n  }\n\n  return result\n}\n\n/* ------ */\n\n/**\n * Loads the appropriate NextConfig for the specified phase.\n * (An adaptation for Compute of function in Next.js of the same name,\n * found at next/server/config.ts)\n */\nexport async function loadConfig(\n  phase: string,\n  assets: Assets,\n  dir: string,\n  customConfig?: object | null,\n) {\n  // no .env in Compute\n  // no webpack hooks in Compute\n\n  let configFileName = 'next.config.js';\n\n  if (customConfig) {\n    return assignDefaults({\n      configOrigin: 'server',\n      configFileName,\n      ...customConfig,\n    }) as NextConfigComplete\n  }\n\n  let path: string | null = null;\n  for(const configFile of CONFIG_FILES) {\n    if ('/' + configFile in assets) {\n      path = configFile;\n      break;\n    }\n  }\n\n  if(path?.length) {\n    configFileName = basename(path);\n    let userConfigModule: any;\n    try {\n      userConfigModule = assets['/' + path].module;\n    } catch (err) {\n      Log.error(\n        `Failed to load ${configFileName}, see more info here https://nextjs.org/docs/messages/next-config-error`\n      );\n      throw err;\n    }\n    const userConfig = await normalizeConfig(\n      phase,\n      userConfigModule.default || userConfigModule\n    );\n\n    const validateResult = validateConfig(userConfig)\n\n    if (validateResult.errors) {\n      Log.warn(`Invalid next.config.js options detected: `)\n\n      // Only load @segment/ajv-human-errors when invalid config is detected\n      const { AggregateAjvError } =\n        require('next/dist/compiled/@segment/ajv-human-errors') as typeof import('next/dist/compiled/@segment/ajv-human-errors')\n      const aggregatedAjvErrors = new AggregateAjvError(validateResult.errors, {\n        fieldLabels: 'js',\n      });\n      for (const error of aggregatedAjvErrors) {\n        console.error(`  - ${error.message}`)\n      }\n\n      console.error(\n        '\\nSee more info here: https://nextjs.org/docs/messages/invalid-next-config'\n      )\n    }\n\n    if (Object.keys(userConfig).length === 0) {\n      Log.warn(\n        `Detected ${configFileName}, no exported configuration found. https://nextjs.org/docs/messages/empty-configuration`\n      )\n    }\n\n    if (userConfig.target && !targets.includes(userConfig.target)) {\n      throw new Error(\n        `Specified target is invalid. Provided: \"${\n          userConfig.target\n        }\" should be one of ${targets.join(', ')}`\n      )\n    }\n\n    if (userConfig.target && userConfig.target !== 'server') {\n      Log.warn(\n        'The `target` config is deprecated and will be removed in a future version.\\n' +\n          'See more info here https://nextjs.org/docs/messages/deprecated-target-config'\n      )\n    }\n\n    if (userConfig.amp?.canonicalBase) {\n      const { canonicalBase } = userConfig.amp || ({} as any)\n      userConfig.amp = userConfig.amp || {}\n      userConfig.amp.canonicalBase =\n        (canonicalBase.endsWith('/')\n          ? canonicalBase.slice(0, -1)\n          : canonicalBase) || ''\n    }\n\n    if (process.env.NEXT_PRIVATE_TARGET) {\n      userConfig.target = process.env.NEXT_PRIVATE_TARGET;\n    }\n\n    return assignDefaults({\n      configOrigin: relative(dir, path),\n      configFile: path,\n      configFileName,\n      ...userConfig,\n    }) as NextConfigComplete\n  } else {\n    const configBaseName = basename(CONFIG_FILES[0], extname(CONFIG_FILES[0]))\n\n    const checkFiles = [\n      `${configBaseName}.jsx`,\n      `${configBaseName}.ts`,\n      `${configBaseName}.tsx`,\n      `${configBaseName}.json`,\n    ];\n\n    let nonJsPath: string | null = null;\n    for(const file of checkFiles) {\n      if ('/' + file in assets) {\n        nonJsPath = file;\n        break;\n      }\n    }\n\n    if(nonJsPath?.length) {\n      throw new Error(\n        `Configuring Next.js via '${basename(\n          nonJsPath\n        )}' is not supported. Please replace the file with 'next.config.js' or 'next.config.mjs'.`\n      );\n    }\n  }\n\n  // always call assignDefaults to ensure settings like\n  // reactRoot can be updated correctly even with no next.config.js\n  const completeConfig = assignDefaults(defaultConfig) as NextConfigComplete;\n  completeConfig.configFileName = configFileName;\n  return completeConfig;\n}\n"]}