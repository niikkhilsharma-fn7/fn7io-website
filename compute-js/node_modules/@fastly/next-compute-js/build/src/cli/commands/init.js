"use strict";
/*
 * Copyright Fastly, Inc.
 * Licensed under the MIT license. See LICENSE file for details.
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.init = void 0;
const arg_1 = __importDefault(require("arg"));
const chalk_1 = __importDefault(require("chalk"));
const is_error_1 = __importDefault(require("next/dist/lib/is-error"));
const utils_1 = require("next/dist/server/lib/utils");
const generate_1 = require("../../init-server/generate");
function init(argv) {
    const validArgs = {
        // Types
        '--help': Boolean,
        // Aliases
        '-h': '--help',
    };
    let args;
    try {
        args = (0, arg_1.default)(validArgs, { argv });
    }
    catch (error) {
        if ((0, is_error_1.default)(error) && error.code === 'ARG_UNKNOWN_OPTION') {
            return (0, utils_1.printAndExit)(error.message, 1);
        }
        throw error;
    }
    if (args['--help']) {
        console.log(`
      Description
        Initializes a compute-js project from a Next.js project
        
      Usage
        $ npx @fastly/next-compute-js init

      Learn more: ${chalk_1.default.cyan('https://fastly.com/path/to/reference')}`);
        return;
    }
    (0, generate_1.generateServerProject)();
}
exports.init = init;
//# sourceMappingURL=init.js.map