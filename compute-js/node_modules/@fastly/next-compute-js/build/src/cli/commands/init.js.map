{"version":3,"file":"init.js","sourceRoot":"","sources":["../../../../src/cli/commands/init.ts"],"names":[],"mappings":";AAAA;;;GAGG;;;;;;AAEH,8CAAsB;AACtB,kDAA0B;AAE1B,sEAA6C;AAC7C,sDAA0D;AAE1D,yDAAmE;AAEnE,SAAgB,IAAI,CAAC,IAA0B;IAC7C,MAAM,SAAS,GAAa;QAC1B,QAAQ;QACR,QAAQ,EAAE,OAAO;QACjB,UAAU;QACV,IAAI,EAAE,QAAQ;KACf,CAAA;IACD,IAAI,IAA0B,CAAA;IAC9B,IAAI;QACF,IAAI,GAAG,IAAA,aAAG,EAAC,SAAS,EAAE,EAAE,IAAI,EAAE,CAAC,CAAA;KAChC;IAAC,OAAO,KAAK,EAAE;QACd,IAAI,IAAA,kBAAO,EAAC,KAAK,CAAC,IAAI,KAAK,CAAC,IAAI,KAAK,oBAAoB,EAAE;YACzD,OAAO,IAAA,oBAAY,EAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC,CAAA;SACtC;QACD,MAAM,KAAK,CAAA;KACZ;IAED,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE;QAClB,OAAO,CAAC,GAAG,CACT;;;;;;;oBAOc,eAAK,CAAC,IAAI,CACtB,sCAAsC,CACvC,EAAE,CACJ,CAAA;QACD,OAAO;KACR;IAED,IAAA,gCAAqB,GAAE,CAAC;AAC1B,CAAC;AAlCD,oBAkCC","sourcesContent":["/*\n * Copyright Fastly, Inc.\n * Licensed under the MIT license. See LICENSE file for details.\n */\n\nimport arg from 'arg';\nimport chalk from 'chalk';\n\nimport isError from 'next/dist/lib/is-error';\nimport { printAndExit } from 'next/dist/server/lib/utils';\n\nimport { generateServerProject } from '../../init-server/generate';\n\nexport function init(argv: string[] | undefined) {\n  const validArgs: arg.Spec = {\n    // Types\n    '--help': Boolean,\n    // Aliases\n    '-h': '--help',\n  }\n  let args: arg.Result<arg.Spec>\n  try {\n    args = arg(validArgs, { argv })\n  } catch (error) {\n    if (isError(error) && error.code === 'ARG_UNKNOWN_OPTION') {\n      return printAndExit(error.message, 1)\n    }\n    throw error\n  }\n\n  if (args['--help']) {\n    console.log(\n      `\n      Description\n        Initializes a compute-js project from a Next.js project\n        \n      Usage\n        $ npx @fastly/next-compute-js init\n\n      Learn more: ${chalk.cyan(\n        'https://fastly.com/path/to/reference'\n      )}`\n    )\n    return;\n  }\n\n  generateServerProject();\n}\n"]}